{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'/api';const api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});// Add token to requests\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=`Bearer ${token}`;}return config;});// Handle token expiration\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('token');window.location.href='/login';}return Promise.reject(error);});export const authService={async login(email,password){const response=await api.post('/auth/login',{email,password});return response.data;},async register(name,email,password,password_confirmation){const response=await api.post('/auth/register',{name,email,password,password_confirmation});return response.data;},async logout(){const response=await api.post('/auth/logout');return response.data;},async me(){const response=await api.get('/auth/me');return response.data;}};export const loopService={async getLoops(params){const response=await api.get('/loops',{params});return response.data;},async getLoop(id){const response=await api.get(`/loops/${id}`);return response.data;},async createLoop(data){const response=await api.post('/loops',data);return response.data;},async updateLoop(id,data){const response=await api.put(`/loops/${id}`,data);return response.data;},async deleteLoop(id){const response=await api.delete(`/loops/${id}`);return response.data;},async executeLoop(id,data){const response=await api.post(`/loops/${id}/execute`,{data});return response.data;},async duplicateLoop(id){const response=await api.post(`/loops/${id}/duplicate`);return response.data;},async toggleLoop(id){const response=await api.patch(`/loops/${id}/toggle`);return response.data;},async publishLoop(id){const response=await api.patch(`/loops/${id}/publish`);return response.data;},async getExecutions(id){const response=await api.get(`/loops/${id}/executions`);return response.data;}};export const dashboardService={async getDashboard(){const response=await api.get('/dashboard');return response.data;}};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","authService","login","email","password","post","data","register","name","password_confirmation","logout","me","get","loopService","getLoops","params","getLoop","id","createLoop","updateLoop","put","deleteLoop","delete","executeLoop","duplicateLoop","toggleLoop","patch","publishLoop","getExecutions","dashboardService","getDashboard"],"sources":["/workspace/frontend/src/services/authService.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Add token to requests\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Handle token expiration\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const authService = {\n  async login(email: string, password: string) {\n    const response = await api.post('/auth/login', { email, password });\n    return response.data;\n  },\n\n  async register(name: string, email: string, password: string, password_confirmation: string) {\n    const response = await api.post('/auth/register', {\n      name,\n      email,\n      password,\n      password_confirmation,\n    });\n    return response.data;\n  },\n\n  async logout() {\n    const response = await api.post('/auth/logout');\n    return response.data;\n  },\n\n  async me() {\n    const response = await api.get('/auth/me');\n    return response.data;\n  },\n};\n\nexport const loopService = {\n  async getLoops(params?: any) {\n    const response = await api.get('/loops', { params });\n    return response.data;\n  },\n\n  async getLoop(id: string) {\n    const response = await api.get(`/loops/${id}`);\n    return response.data;\n  },\n\n  async createLoop(data: any) {\n    const response = await api.post('/loops', data);\n    return response.data;\n  },\n\n  async updateLoop(id: string, data: any) {\n    const response = await api.put(`/loops/${id}`, data);\n    return response.data;\n  },\n\n  async deleteLoop(id: string) {\n    const response = await api.delete(`/loops/${id}`);\n    return response.data;\n  },\n\n  async executeLoop(id: string, data?: any) {\n    const response = await api.post(`/loops/${id}/execute`, { data });\n    return response.data;\n  },\n\n  async duplicateLoop(id: string) {\n    const response = await api.post(`/loops/${id}/duplicate`);\n    return response.data;\n  },\n\n  async toggleLoop(id: string) {\n    const response = await api.patch(`/loops/${id}/toggle`);\n    return response.data;\n  },\n\n  async publishLoop(id: string) {\n    const response = await api.patch(`/loops/${id}/publish`);\n    return response.data;\n  },\n\n  async getExecutions(id: string) {\n    const response = await api.get(`/loops/${id}/executions`);\n    return response.data;\n  },\n};\n\nexport const dashboardService = {\n  async getDashboard() {\n    const response = await api.get('/dashboard');\n    return response.data;\n  },\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}